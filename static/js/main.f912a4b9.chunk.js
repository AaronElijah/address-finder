(this["webpackJsonpaddress-finder"]=this["webpackJsonpaddress-finder"]||[]).push([[0],{23:function(e,s,t){},24:function(e,s,t){},25:function(e,s,t){},28:function(e,s,t){},29:function(e,s,t){},48:function(e,s,t){},49:function(e,s,t){},50:function(e,s,t){"use strict";t.r(s);var n,a=t(2),d=t.n(a),c=t(5),r=t.n(c),l=(t(23),t(7)),o=(t(24),t(25),t(0)),i=function(e){var s=e.title,t=e.subtitle;return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("h1",{className:"title",children:s}),Object(o.jsx)("h3",{className:"subtitle",children:t}),Object(o.jsx)("div",{className:"divider"})]})},u=t(4),h=t.n(u),j=t(6),b=(t(28),function(e){var s=e.defaultMessage,t=e.options,n=e.value,a=e.handleChangeValue;return Object(o.jsxs)("select",{className:"dropdown",value:null===n?"":n,onChange:function(e){a(e.target.value)},children:[Object(o.jsx)("option",{value:void 0,style:{display:"none"},children:s},"none"),t.map((function(e){return Object(o.jsx)("option",{"data-testid":"select-option",value:e.value,children:e.label},e.label)}))]})}),p=(t(29),function(e){var s=e.placeholder,t=e.inputValue,n=e.onInputChange,a=e.onSearch,d=e.disabled;return Object(o.jsxs)("form",{className:"form",children:[Object(o.jsx)("input",{type:"text",placeholder:s,className:"input",value:null===t?"":t,onChange:n,disabled:d}),Object(o.jsx)("button",{className:"search-glass button-hover",onClick:a,disabled:d})]})}),v=function(e){var s=e.value,t=e.placeholder,n=e.disabled,a=e.handleChange,d=e.handleSearch;return Object(o.jsx)(p,{placeholder:t,inputValue:s,onInputChange:function(e){e.preventDefault(),e.target.value.length<=8&&a(e.target.value)},onSearch:function(e){e.preventDefault(),d()},disabled:n})},O={modal:{isVisible:!0,title:"Welcome to Octopus Weath",subheading:"Please fill in your address details"}},f=d.a.createContext((function(){})),m=t(17),y=t.n(m),x=function(){var e=Object(j.a)(h.a.mark((function e(s,t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{"api-key":"eKtESYz-3UWLEdxChO2gHw22427",format:!0},validateStatus:function(e){return e>=200&&e<300}},e.abrupt("return",y.a.get("https://api.getAddress.io/find/".concat(s),n).then((function(e){return e.data.addresses})).catch((function(e){e.response?t("Error from server",e.response.data.Message):e.request?t("Error in request","Something wrong with request - check api key"):t("Unknown error","Please contact admin")})));case 2:case"end":return e.stop()}}),e)})));return function(s,t){return e.apply(this,arguments)}}(),g=t(18),A=t(1),C=["postcode"];!function(e){e.updateYears="update/years",e.updateMonths="update/months",e.updatePostcode="update/postcode",e.setAddresses="set/addresses",e.setChosenAddress="set/chosenaddress",e.updateChosenAddress="update/chosenaddress",e.saveAddress="save/address",e.deleteAddress="delete/address"}(n||(n={}));var N,w=function(e,s){var t,a,d,c,r;switch(s.type){case n.updateYears:return Object(A.a)(Object(A.a)({},e),{},{years:s.payload.newValue});case n.updateMonths:return Object(A.a)(Object(A.a)({},e),{},{months:s.payload.newValue});case n.updatePostcode:return Object(A.a)(Object(A.a)({},e),{},{postcode:s.payload.newValue});case n.setAddresses:return Object(A.a)(Object(A.a)({},e),{},{addresses:s.payload.addresses});case n.setChosenAddress:var l=s.payload.addressOption.split(",");return Object(A.a)(Object(A.a)({},e),{},{chosenAddress:{line1:l[0],line2:l[1],line3:l[2],city:l[3],county:l[4]}});case n.updateChosenAddress:var o=s.payload,i=o.postcode,u=Object(g.a)(o,C),h=void 0!==i?i:e.postcode,j=Object.keys(u).reduce((function(e,s){return void 0!==u[s]&&(e[s]=u[s]),e}),{});return Object(A.a)(Object(A.a)({},e),{},{chosenAddress:Object(A.a)(Object(A.a)({},e.chosenAddress),j),postcode:h});case n.saveAddress:return Object(A.a)(Object(A.a)({},e),{},{postcode:null,years:null,months:null,chosenAddress:null,addresses:[],savedAddress:{postcode:e.postcode,years:e.years,months:e.months,line1:null===(t=e.chosenAddress)||void 0===t?void 0:t.line1,line2:null===(a=e.chosenAddress)||void 0===a?void 0:a.line2,line3:null===(d=e.chosenAddress)||void 0===d?void 0:d.line3,city:null===(c=e.chosenAddress)||void 0===c?void 0:c.city,county:null===(r=e.chosenAddress)||void 0===r?void 0:r.county}});case n.deleteAddress:return Object(A.a)(Object(A.a)({},e),{},{savedAddress:null});default:return e}};!function(e){e.updateModal="update/modal"}(N||(N={}));var V=function(e,s){switch(s.type){case N.updateModal:return Object(A.a)(Object(A.a)({},e),{},{modal:Object(A.a)(Object(A.a)({},e.modal),s.payload)});default:return e}},k=(t(48),Array.from({length:6},(function(e,s){return{value:s,label:"".concat(s," ").concat(1===s?"year":"years")}}))),P=Array.from({length:12},(function(e,s){return{value:s,label:"".concat(s," ").concat(1===s?"month":"months")}})),M={years:null,months:null,postcode:null,addresses:[],chosenAddress:null,savedAddress:null},S=function(e){return null===e.years||null===e.months},D=function(e){var s,t,d,c=e.isDisabled,r=Object(a.useReducer)(w,M),i=Object(l.a)(r,2),u=i[0],p=i[1],O=Object(a.useContext)(f),m=function(e,s){O({type:N.updateModal,payload:{isVisible:!0,title:e,subheading:s}})};return Object(o.jsxs)("div",{className:"address-form-container ".concat(c?"disabled":""),children:[null!==u.savedAddress?Object(o.jsxs)("div",{id:"saved-address",children:[Object(o.jsxs)("div",{className:"lines",children:[Object(o.jsx)("div",{children:(d=u.savedAddress,"".concat(d.line1,", ").concat(d.line2,", ").concat(d.city,", ").concat(d.postcode))}),Object(o.jsx)("button",{className:"delete-icon button-hover",onClick:function(e){e.preventDefault(),p({type:n.deleteAddress})}})]}),Object(o.jsx)("div",{className:"lines",children:Object(o.jsx)("div",{children:"Time at address: ".concat(u.savedAddress.years," ").concat(1===u.savedAddress.years?"year":"years",", ").concat(u.savedAddress.months," ").concat(1===u.savedAddress.months?"month":"months")})})]}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)("div",{className:"sub-heading",children:"How long have you lived at your current address?"}),Object(o.jsxs)("div",{id:"duration-answers",children:[Object(o.jsx)("span",{id:"select-address-years",children:Object(o.jsx)(b,{defaultMessage:"Select years",options:k,value:u.years,handleChangeValue:function(e){return p({type:n.updateYears,payload:{newValue:parseInt(e)}})}})}),Object(o.jsx)("span",{id:"select-address-months",children:Object(o.jsx)(b,{defaultMessage:"Select months",options:P,value:u.months,handleChangeValue:function(e){return p({type:n.updateMonths,payload:{newValue:parseInt(e)}})}})})]}),Object(o.jsx)("div",{className:"sub-heading",children:"Postcode search"}),Object(o.jsx)("div",{id:"postcode-search",children:Object(o.jsx)(v,{value:u.postcode,placeholder:"Enter postcode",disabled:S(u),handleChange:function(e){p({type:n.updatePostcode,payload:{newValue:e}})},handleSearch:Object(j.a)(h.a.mark((function e(){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.postcode){e.next=5;break}return e.next=3,x(u.postcode,m);case 3:void 0!==(s=e.sent)&&p({type:n.setAddresses,payload:{addresses:s}});case 5:case"end":return e.stop()}}),e)})))})}),u.addresses.length>0?Object(o.jsxs)("div",{className:"select-address",children:[Object(o.jsx)("div",{className:"sub-heading",children:"Address"}),Object(o.jsx)("span",{id:"select-address-list",children:Object(o.jsx)(b,{defaultMessage:"Select your address",options:(t=u.addresses,t.map((function(e){return{label:e.reduce((function(e,s){return s.length>0?e+", "+s:e+""}))+", UK",value:e}}))),value:null!==u.chosenAddress?(s=u.chosenAddress,[s.line1,s.line2,s.line3,s.city,s.county]):null,handleChangeValue:function(e){p({type:n.setChosenAddress,payload:{addressOption:e}})}})})]}):Object(o.jsx)(o.Fragment,{}),null!==u.chosenAddress&&null!==u.postcode?Object(o.jsxs)("div",{id:"address-lines-block",children:[Object(o.jsx)("div",{id:"double-chevron"}),Object(o.jsx)("div",{className:"sub-heading",children:"Address Line 1*"}),Object(o.jsx)("input",{id:"address-line-1",className:"address-lines",value:u.chosenAddress.line1,onChange:function(e){e.preventDefault(),p({type:n.updateChosenAddress,payload:{line1:e.target.value}})}}),Object(o.jsx)("div",{className:"sub-heading",children:"Address Line 2*"}),Object(o.jsx)("input",{id:"address-line-2",className:"address-lines",value:u.chosenAddress.line2,onChange:function(e){e.preventDefault(),p({type:n.updateChosenAddress,payload:{line2:e.target.value}})}}),Object(o.jsx)("div",{className:"sub-heading",children:"City*"}),Object(o.jsx)("input",{id:"address-line-city",className:"address-lines",value:u.chosenAddress.city,onChange:function(e){e.preventDefault(),p({type:n.updateChosenAddress,payload:{city:e.target.value}})}}),Object(o.jsx)("div",{className:"sub-heading",children:"Postcode*"}),Object(o.jsx)("input",{id:"address-line-postcode",className:"address-lines",value:u.postcode,onChange:function(e){return p({type:n.updatePostcode,payload:{newValue:e.target.value}})}}),Object(o.jsx)("button",{id:"submit-button",onClick:function(){!function(e){var s,t,n;return""===(null===(s=e.chosenAddress)||void 0===s?void 0:s.line1)||""===(null===(t=e.chosenAddress)||void 0===t?void 0:t.line2)||""===(null===(n=e.chosenAddress)||void 0===n?void 0:n.city)||""===e.postcode}(u)?p({type:n.saveAddress}):m("Invalid","Please fill in all address form")},children:"Add address"})]}):Object(o.jsx)(o.Fragment,{})]})},F=(t(49),function(e){var s=e.isVisible,t=e.content,n=Object(a.useContext)(f);return s?Object(c.createPortal)(Object(o.jsxs)("div",{className:"modal",children:[Object(o.jsx)("div",{className:"title",children:t.title}),Object(o.jsx)("div",{className:"subheading",children:t.subheading}),Object(o.jsx)("button",{className:"close-button",onClick:function(e){e.preventDefault(),n({type:N.updateModal,payload:{isVisible:!1,title:"",subheading:""}})},children:"Close"})]}),document.body):Object(o.jsx)("div",{})});var I=function(){var e=Object(a.useReducer)(V,O),s=Object(l.a)(e,2),t=s[0],n=s[1];return Object(o.jsx)(f.Provider,{value:n,children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(i,{title:"Address Search",subtitle:"Please enter your address"}),Object(o.jsx)("div",{className:"App-main",children:Object(o.jsx)(D,{isDisabled:t.modal.isVisible})}),Object(o.jsx)(F,{isVisible:t.modal.isVisible,content:{title:t.modal.title,subheading:t.modal.subheading}})]})})},E=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,51)).then((function(s){var t=s.getCLS,n=s.getFID,a=s.getFCP,d=s.getLCP,c=s.getTTFB;t(e),n(e),a(e),d(e),c(e)}))};r.a.render(Object(o.jsx)(d.a.StrictMode,{children:Object(o.jsx)(I,{})}),document.getElementById("root")),E()}},[[50,1,2]]]);
//# sourceMappingURL=main.f912a4b9.chunk.js.map